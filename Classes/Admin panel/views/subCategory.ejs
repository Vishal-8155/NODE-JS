<%- include('./partials/header') %> <%- include('./partials/navbar',{usNm10:usNames}) %> <%-
      include('./partials/sidebar',{usNm10:usNames}) %>

      <body class="hold-transition sidebar-mini">
        <div class="wrapper">
          <div class="content-wrapper">
            <section class="content-header">
              <div class="container-fluid">
                <div class="row mb-2">
                  <div class="col-sm-6">
                    <h1>Sub-Category</h1>
                  </div>
                </div>
              </div>
            </section>

            <section class="content">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-6">
                    <div class="card card-primary">
                      <div class="card-header">
                        <h3 class="card-title">Category</h3>
                      </div>

                      <form action="<%= (editsCate) ? '/updateSubCategory/' + editsCate._id: '/saveSubCategory'%>"
                        method="post">
                        <div class="card-body">
                          <% if(message2){ %>
                            <div class="w-100 rounded p-2 mb-3 btn-danger text-white" role="alert">
                              <%= message2 %>
                            </div>
                            <% } %>

                              <div class="form-group">
                                <label for="exampleInputEmail1">Category Name</label>
                                <select name="Cat_id" class="form-control">
                                  <option value="">Select Category</option>
                                  <% cData.forEach((i)=> { var selected = ( editsCate &&
                                    i._id.toString() == editsCate.Cat_id.toString()) ?
                                    'selected' : ''; %>
                                    <option value="<%= i._id %>" <%="selected" %>
                                      ><%= i.catName %>
                                    </option>
                                    <% }) %>
                                </select>
                              </div>

                              <div class="form-group">
                                <label for="exampleInputEmail1">Sub Category Name</label>
                                <input type="text" name="subCatName" class="form-control"
                                  value="<%= (editsCate) ? editsCate.subCatName:'' %>" id="exampleInputName1"
                                  placeholder="Enter Name" />
                              </div>
                        </div>
                        <div class="card-footer">
                          <button type="submit" class="btn btn-primary">Save</button>
                        </div>
                      </form>
                    </div>
                  </div>

                  <div class="card col-md-6">
                    <div class="card-header">
                      <h3 class="card-title">Category Table</h3>
                    </div>
                    <div class="m-3 mt-3">
                      <select id="dispcat_id" class="p-1 w-50 bg-warning rounded rounded-4" name="dispcat_id">
                        <option value="">Select Category</option>
                        <% cData.forEach((i)=> { %>
                          <option value="<%= i._id %>">
                            <%= i.catName %>
                          </option>
                          <% }) %>
                      </select>
                    </div>
                    <div class="card-body p-0">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th style="width: 10px">#</th>
                            <th>Category Name</th>
                            <th>Sub-Category Name</th>
                            <th>Action</th>
                          </tr>
                        </thead>
                        <tbody id="result">
                          <% if(AllCategory) { %>
                            <% AllCategory.forEach((item, id)=>{ %>
                              <tr>
                                <td>
                                  <%= id + 1 %>
                                </td>
                                <td>
                                  <%= item.Cat_id.catName %>
                                </td>
                                <td>
                                  <%= item.subCatName %>
                                </td>
                                <td>
                                  <a class="btn btn-info" style="margin-right: 6px"
                                    href="/editSubCategory/<%= item._id%>">Edit</a>
                                  <a class="btn btn-danger" href="/deleteSubCategory/<%= item._id%>">Delete</a>
                                </td>
                              </tr>
                              <% }) %>
                                <% } %>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>

          <!-- <aside class="control-sidebar control-sidebar-dark"></aside> -->
        </div>

        <script src="../plugins/jquery/jquery.min.js"></script>
        <script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="../plugins/bs-custom-file-input/bs-custom-file-input.min.js"></script>
        <script src="../dist/js/adminlte.min.js"></script>
        <script src="../dist/js/demo.js"></script>

        <script>
          $(function () {
            bsCustomFileInput.init();
          });
        </script>
        <script src="script.js"></script>
      </body>
      <%- include('./partials/footer') %>